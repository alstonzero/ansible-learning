# 常用模块


### 4.5 yum 模块
等于在Linux上的yum命令，对远程服务器上RPM包进行管理。
**常用参数**：
- name 要安装的软件包名，多个软件包以逗号(,)隔开
- state 对当前指定的软件安装、移除操作(present installed latest absent removed)
 
  - 支持的参数
    - present 确认已经安装，但不升级
    - installed 确认已经安装
    - latest 确保安装，且升级为最新
    - absent 和 removed 确认已经移除
#### Example
- 安装一个软件包
`ansible all -i inventory.yml -m yum -a "name=nginx state=present"`

### 4.5 systemd模块

> CentOS6之前的版本使用`service`模块。
> 请使用`ansible-doc service`命令自行查看信息
管理远程节点上的systemd服务，就是由systemd所管理的服务。
#### 常用参数：
- daemon_reload 重新载入systemd，扫描新的或有变动的单元
- enabled 是否开机自启动yes|no
- name 必选项，服务名称，比如httpd,vsftpd
- state 对当前服务执行started（启动），stopped（停止），restarted（重启),reloaded(重新加载)等操作。

#### Example
- 重新加载 systemd
`ansible all -i inventory.yml -m systemd -a "daemon_reload=yes"`
- 启动Nginx服务
`ansible all -i inventory.yml -m systemd -a "name=nginx state=started"`
- 关闭Nginx服务
`ansible all -i inventory.yml -m systemd -a "name=nginx state=stopped"`
- 重启Nginx服务
`ansible all -i inventory.yml -m systemd -a "name=nginx state=restarted"`
- 重新加载Nginx服务
`ansible all -i inventory.yml -m systemd -a "name=nginx state=reloaded"`
- 将Nginx服务设置为开机自启动
`ansible all -i inventory.yml -m systemd -a "name=nginx enabled=yes"`
